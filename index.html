<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
      <title>Marquee Banner</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
   </head>
   <style>
       body {
            margin: 0;
            border: 0;
       }
      textarea {
         display: none;
         margin-left: auto;
         margin-right: auto;
         max-width: 100%;
         width: 80%;
      }
      .marquee-container {
         width: -webkit-fill-available;
         overflow: hidden;
         background:black;
         padding: 30px;
         margin: 0 auto; /* Auto margin on both sides */
         display: flex ;
			overflow: hidden ;
			white-space: nowrap ;
      }
      .marquee-content {
         display: inline-block;
         height: 1000px;
         font-size:120px;
         font-weight: bold;
         background:black;
         color: yellow;
         text-align: center;
         width: 100%;
         overflow-y: auto;
      }
      .marquee-animated{
         animation: marquee 10s linear infinite;
         -webkit-animation: marquee 10s linear infinite;
      }      
      .marquee-paused{
         -webkit-animation-play-state:paused;
         -moz-animation-play-state:paused;
         -o-animation-play-state:paused;
         animation-play-state:paused;
         cursor: pointer;
      }
      @keyframes marquee {
         0% { transform: translateX(20%); }
         50% { transform: translateX(-20%); }
         100% { transform: translateX(20%); }
      }

   </style>
	
   <body>
      <div class="marquee-container">
         <div class="marquee-content marquee-animation">Hello ~~ ‰Ω†Â•Ω!üòä</div>
       </div>
      <textarea rows="8"></textarea>
   </body>

   <script>
      function wrapWords(input) {
         let output = '';
         let lineLength = 0;

         for (let i = 0; i < input.length; i++) {
            const char = input[i];
            const charLength = char.charCodeAt(0) > 127 ? 2 : 1; // Âà§Êñ∑Â≠óÁ¨¶Èï∑Â∫¶

            // Ê™¢Êü•ÊòØÂê¶ÈúÄË¶ÅÊèõË°å
            if (lineLength + charLength >= 16 || char === '\n') {
                  output += '<br>';
                  lineLength = 0;
            }

            // Â¶ÇÊûúÊòØÊèõË°åÂ≠óÁ¨¶ÔºåÂâá‰∏çÂ∞áÂÆÉÂä†Âà∞Ëº∏Âá∫Â≠óÁ¨¶‰∏≤‰∏≠
            if (char !== '\n') {
                  output += char;
                  lineLength += charLength;
            }
         }

         return output;
      }

      var touchtime = 0;
      $(".marquee-container").on("click", function() {
         if (touchtime == 0) {
            // set first click
            $(".marquee-animation").toggleClass("marquee-paused")
            touchtime = new Date().getTime();
         } else {
            // compare first click to this click and see if they occurred within double click threshold
            if (((new Date().getTime()) - touchtime) < 800) {
                  // double click occurred
                  $(".marquee-animation").toggleClass("marquee-animated");
                  $("textarea").val($(".marquee-content").html().replaceAll("<br>","\n"));
                  $(".marquee-container").hide();
                  $("textarea").show();
                  $("textarea").focus();
                  touchtime = 0;
            } else {
                  // not a double click so set as a new first click
                  $(".marquee-animation").toggleClass("marquee-paused");
                  touchtime = new Date().getTime();
            }
         }
      });      

      $("textarea").blur(function() {
         $(".marquee-content").html(wrapWords($.trim($("textarea").val())));
         $(".marquee-container").show();
         $("textarea").hide();
         touchtime = new Date().getTime();
      });
   </script>
</html>
